"use strict";var _utils=require("./utils"),Tips={isLoading:!1,toast:function(i){var n=i.title,t=i.icon||"success",o=i.image||"",e=i.duration||1500,a=i.mask;if(setTimeout(function(){wx.showToast({title:n,icon:t,image:o,duration:e,mask:a})},300),0<e)return new Promise(function(i,n){setTimeout(function(){i()},e)})},confirm:function(i){var o=i.title||"提示",e=i.content||"默认提示内容",a=i.payload||{},s=i.cancel,c=i.cancelText||"取消",r=i.cancelColor||"#000000",l=i.confirmText||"确定",u=i.confirmColor||"#3CC51F";return new Promise(function(n,t){wx.showModal({title:o,content:e,showCancel:s,cancelText:c,cancelColor:r,confirmText:l,confirmColor:u,success:function(i){i.confirm?n(a):i.cancel&&t(a)},fail:function(i){t(a)}})})},loading:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"加载中";this.isLoading||(this.isLoading=!0,wx.showLoading({title:i,mask:!0}))},go:function(i){wx.navigateTo({url:i})},setTitle:function(i){wx.setNavigationBarTitle({title:i})},loaded:function(){this.isLoading&&(this.isLoading=!1,wx.hideLoading())},downloadSaveFile:function(i){var n=i.success,t=i.fail,o="",e=i.url;o=i.id?i.id:e,wx.downloadFile({url:i.url,success:function(i){wx.saveFile({tempFilePath:i.tempFilePath,success:function(i){i.id=o,n(i)},fail:function(i){console.info("保存一个文件失败"),t(i)}})},fail:function(i){console.info("下载一个文件失败"),t(i)}})},downloadSaveFiles:function(i){for(var t=i.progress,o=i.success,n=i.fail,e=i.urls,a=new Map,s=e.length,c=100/s,r=0;r<s;r++)this.downloadSaveFile({url:e[r],success:function(i){i.savedFilePath;a.set(i.id,i);var n=a.size*c;t?(a.step=n,o(a)):t||100!==n||o(a)},fail:function(i){n(i)}})},navigateTo:function(i,n){this._openInterceptor("navigateTo",i,n)},redirectTo:function(i,n){this._openInterceptor("redirectTo",i,n)},switchTab:function(i,n){this._openInterceptor("switchTab",i,n)},reLaunch:function(i,n){this._openInterceptor("reLaunch",i,n)},_openInterceptor:function(i,n,t){var o=this;this.IsPageNavigating||(this.IsPageNavigating=!0,t=(0,_utils.param)(t),wx[i]({url:n+t,complete:function(){o.IsPageNavigating=!1}}))}};Tips.isLoading=!1,module.exports=Tips;